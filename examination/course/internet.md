# 8. 计网学习笔记
# Part1
![图片](http://img.cdn.sugarat.top/mdImg/MTU4NTIzMzA2NDMwNw==585233064307)
## 1.应用层
1. 体系结构中的最高层
2. 任务:通过应用进程间的交互来完成特定网络应用
3. 定义:应用进程(主机中正在运行的程序)间通信和交互的规则
4. 应用层协议:域名系统DNS,HTTP,SMTP等等
5. 交互的数据单元称为``报文``

## 2.运输层(传输层)
1. 任务:负责两台主机中的进程之间的通信,提供通用的(不针对某个特定网络应用,多种应用可以使用同一个运输层服务)数据传输服务
   * ``应用进程``利用该服务传送``应用层报文``
2. 主要协议:
   * TCP(传输控制协议)
     * 面向有链接,可靠的数据传输服务
     * 传输单位:报文段
   * UDP(用户数据协议)
     * 面向无连接,不保证数据传输的可靠性
     * 传输单位:用户数据报

## 3. 网络层
1. 任务:为分组交换网上不同的主机提供通信服务
2. TCP/IP体系:网络层使用ip协议
   * 分组=ip数据报||数据报

## 4. 数据链路层(链路层)
在两个相邻节点之间传输数据时,数据链路层将网络层交下来的ip数据报组装成``帧``,在两个相邻节点上传输帧
* 帧:包含数据和必要的控制信息(同步信息,地址信息,差错控制)

## 5.物理层
* 传输数据单位:比特
---

**TCP/IP**
>不单指TCP/IP这两个协议,往往指互联网所使用的整个TCP/IP协议族

# 物理层

![图片](http://img.cdn.sugarat.top/mdImg/MTU4NTI4MTIwMDYzMQ==585281200631)


![图片](http://img.cdn.sugarat.top/mdImg/MTU4NTI4MTEyNzU5Mg==585281127592)
* AM(Amplitude Modulation):调幅
* FM(Frequency Modulation):调频
* PM(phase Modulation):调相
* ATM:异步传输模式
## 信道的极限容量
* 信道能够通过的频率范围
* 信噪比

## 奈氏准则
在任何信道中,码元的传输速率是有上限的,否则就会出现``码间串扰``问题,使接收端对码元的判决成为不可能

## 信噪比
信号的平均功率和噪声的平均功率之比,常记做*S/N*并用分贝(``db``)作为单位

>信噪比(db) = 10 log<sub>10</sub>(S/N) (``db``)

### 例子
1. S/N = 10则 信噪比 = 10``db``
2. S/N = 1000 信噪比 = 30``db``

## 香农公式
>信道极限传输速率C = Wlog<sub>2</sub>(1+S/N) (``bit/s``)
* W:信道带宽(``Hz``)
* S:信道内所传信号的平均功率
* N:信道内部高斯噪声功率

# 数据链路层
![图片](http://img.cdn.sugarat.top/mdImg/MTU4NTc5NDIyNjYwMQ==585794226601)

取模就是异或运算
![图片](http://img.cdn.sugarat.top/mdImg/MTU4NTc5NDMyODgwNg==585794328806)

CRC差错检验技术只能做到无差错接受

![图片](http://img.cdn.sugarat.top/mdImg/MTU4NTgxNzA3NTA0MA==585817075040)

# 运输层
![图片](http://img.cdn.sugarat.top/mdImg/MTU4NzA4OTUzNTI4Mw==587089535283)

| 动作  | 交换表状态 | 向哪些接口转发 |           说明            |
| :---: | :--------: | :------------: | :-----------------------: |
| A-->D |  A --- 1   |   A,B,C,D,E    |         广播,登记         |
| D-->A |  D --- 4   |       A        |         转发,登记         |
| E-->A |  E --- 5   |       A        |         转发,登记         |
| A-->E |  A --- 1   |       E        | 转发,登记(更新记录的时间) |

| 序号  |   子网号码   | 主机号码最小值 |     最大值     |
| :---: | :----------: | :------------: | :------------: |
|   1   | 129.250.1.0  |  129.250.1.1   | 129.250.1.254  |
|   2   | 129.250.2.0  |  129.250.2.1   | 129.250.2.254  |
|   3   | 129.250.3.0  |  129.250.3.1   | 129.250.3.254  |
|   4   | 129.250.4.0  |  129.250.4.1   | 129.250.4.254  |
|   5   | 129.250.5.0  |  129.250.5.1   | 129.250.5.254  |
|   6   | 129.250.6.0  |  129.250.6.1   | 129.250.6.254  |
|   7   | 129.250.7.0  |  129.250.7.1   | 129.250.7.254  |
|   8   | 129.250.8.0  |  129.250.8.1   | 129.250.8.254  |
|   9   | 129.250.9.0  |  129.250.9.1   | 129.250.9.254  |
|  10   | 129.250.10.0 |  129.250.10.1  | 129.250.10.254 |
|  11   | 129.250.11.0 |  129.250.11.1  | 129.250.11.254 |
|  12   | 129.250.12.0 |  129.250.12.1  | 129.250.12.254 |
|  13   | 129.250.13.0 |  129.250.13.1  | 129.250.13.254 |
|  14   | 129.250.14.0 |  129.250.14.1  | 129.250.14.254 |
|  15   | 129.250.15.0 |  129.250.15.1  | 129.250.15.254 |
|  16   | 129.250.16.0 |  129.250.16.1  | 129.250.16.254 |




## 第一问:
* RIP协议采用UDP是因为RIP每周期需全网组播路由信息，信息量大，故使用UDP协议可以提高效率,UDP面向无连接且传输速率恒定

* OSPF本身提供主从协商机制，可以保证可靠的传输，全网路由器保持着同样的一个链路状态数据库，当拓扑发生变化时，需要携带的变更信息较少，通过IP协议即可完成

* BGP为边界网关协议，因携带的路由信息较多，且可能跨不同网络传送路由信息，为保证传输稳定可靠，需使用TCP协议

## 第二问
BGP做为自治系统间的路由协议，需要携带大量的路由信息，远远超出了IGP携带路由的数量。因此，BGP需要采用一种可靠的协议来承载,即TCP协议。利用了TCP面向有连接，数据传输可靠，重传等机制保证传输的可靠性，因此BGP协议本身就可以省去这方面的设计工作，简化了协议的设计










# TCP运输链接管理
![图片](http://img.cdn.sugarat.top/mdImg/MTU4Nzg4NDI0NDIwNQ==587884244205)

![图片](http://img.cdn.sugarat.top/mdImg/MTU4Nzg4NDUwMDExNg==587884500116)